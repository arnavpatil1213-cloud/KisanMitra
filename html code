<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KisanMitra</title>

<style>
  body{
    margin:0;
    font-family:Poppins,Arial,sans-serif;
    background:linear-gradient(to bottom,#ff9933 0%,#ffffff 50%,#138808 100%);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  header{
    text-align:center;
    padding:10px;
  }
  header img{
    height:80px;
    margin-bottom:5px;
  }
  nav{
    width:100%;
    display:flex;
    justify-content:space-around;
    background:#2f6d2f;
    color:#fff;
    padding:10px 0;
  }
  nav button{
    background:none;
    border:none;
    color:white;
    font-size:15px;
  }
  main{
    flex:1;
    width:95%;
    max-width:600px;
    background:white;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.2);
    padding:15px;
    margin-top:10px;
  }
  #location{
    text-align:center;
    color:#444;
    margin-bottom:10px;
  }
  select,button{
    padding:6px 8px;
    border-radius:8px;
    border:1px solid #ccc;
  }
  #voiceBtn{
    background:#2f6d2f;
    color:#fff;
    border:none;
    padding:10px 14px;
    margin-top:10px;
    border-radius:8px;
  }
  .section{ display:none; }
  .active{ display:block; }
</style>
</head>

<body>

<header>
  <img src="logo.png" alt="KisanMitra Logo">
  <h1>KisanMitra</h1>
</header>

<nav>
  <button onclick="show('home')">Home</button>
  <button onclick="show('market')">Market</button>
  <button onclick="show('weather')">Weather</button>
  <button onclick="show('tips')">Tips</button>
  <button onclick="show('about')">About</button>
</nav>

<main>
  <div id="location">Detecting your location...</div>

  <div style="text-align:center;margin-bottom:15px;">
    <label>ЁЯМП Language:</label>
    <select id="lang" onchange="changeLang()">
      <option value="en">English</option>
      <option value="hi">рд╣рд┐рдиреНрджреА</option>
      <option value="mr">рдорд░рд╛рдареА</option>
      <option value="ta">родрооро┐ро┤рпН</option>
      <option value="te">р░др▒Жр░▓р▒Бр░Чр▒Б</option>
      <option value="bn">ржмрж╛ржВрж▓рж╛</option>
      <option value="gu">ркЧрлБркЬрк░рк╛ркдрлА</option>
      <option value="kn">р▓Хр▓ир│Нр▓ир▓б</option>
      <option value="ml">р┤ор┤▓р┤пр┤╛р┤│р┤В</option>
      <option value="pa">рикрй░риЬри╛римрйА</option>
      <option value="or">рмУрмбрм╝рм┐рмЖ</option>
    </select>
  </div>

  <section id="home" class="section active">
    <h2 id="homeTitle"></h2>
    <p id="homeText"></p>
    <button id="voiceBtn" onclick="speakSection('homeText')">ЁЯФК Listen</button>
  </section>

  <section id="market" class="section">
    <h2 id="marketTitle"></h2>
    <div id="marketList"></div>
    <button id="voiceBtn" onclick="speakSection('marketList')">ЁЯФК Listen</button>
  </section>

  <section id="weather" class="section">
    <h2 id="weatherTitle"></h2>
    <p id="weatherText"></p>
    <button id="voiceBtn" onclick="speakSection('weatherText')">ЁЯФК Listen</button>
  </section>

  <section id="tips" class="section">
    <h2 id="tipsTitle"></h2>
    <ul id="tipsList"></ul>
    <button id="voiceBtn" onclick="speakSection('tipsList')">ЁЯФК Listen</button>
  </section>

  <section id="about" class="section">
    <h2 id="aboutTitle"></h2>
    <p id="aboutText"></p>
    <button id="voiceBtn" onclick="speakSection('aboutText')">ЁЯФК Listen</button>
  </section>
</main>

<script>
function show(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

const data={
 en:{
  homeTitle:"Welcome to KisanMitra",
  homeText:"Empowering Indian farmers with smart technology.",
  marketTitle:"Daily Market Prices (тВ╣/kg)",
  weatherTitle:"Weather Updates",
  weatherText:"Fetching weather...",
  tipsTitle:"Farming Tips",
  tips:["Use compost","Water early","Check for pests","Rotate crops"],
  aboutTitle:"About KisanMitra",
  aboutText:"Team KisanXCoders тАФ DPS Navi Mumbai | Buildathon 2025"
 },
 hi:{
  homeTitle:"рдХрд┐рд╕рд╛рдирдорд┐рддреНрд░ рдореЗрдВ рд╕реНрд╡рд╛рдЧрдд рд╣реИ",
  homeText:"рд╕реНрдорд╛рд░реНрдЯ рддрдХрдиреАрдХ рд╕реЗ рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЛ рд╕рд╢рдХреНрдд рдмрдирд╛рдирд╛ред",
  marketTitle:"рджреИрдирд┐рдХ рдмрд╛рдЬрд╝рд╛рд░ рдореВрд▓реНрдп (тВ╣/рдХрд┐рд▓реЛ)",
  weatherTitle:"рдореМрд╕рдо рдЬрд╛рдирдХрд╛рд░реА",
  weatherText:"рдореМрд╕рдо рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...",
  tipsTitle:"рдЦреЗрддреА рд╕реБрдЭрд╛рд╡",
  tips:["рдЬреИрд╡рд┐рдХ рдЦрд╛рдж","рд╕реБрдмрд╣ рд╕рд┐рдВрдЪрд╛рдИ","рдХреАрдЯ рдЬрд╛рдБрдЪ","рдлрд╕рд▓ рдкрд░рд┐рд╡рд░реНрддрди"],
  aboutTitle:"рдХрд┐рд╕рд╛рдирдорд┐рддреНрд░ рдкрд░рд┐рдЪрдп",
  aboutText:"рдЯреАрдо рдХрд┐рд╕рд╛рдирдПрдХреНрд╕рдХреЛрдбрд░реНрд╕ тАФ рдбреАрдкреАрдПрд╕ рдирд╡реА рдореБрдВрдмрдИ | Buildathon 2025"
 }
};

let currentLang="en";

function changeLang(){
  currentLang=document.getElementById("lang").value;
  loadLang();
}

function loadLang(){
  const t=data[currentLang]||data.en;
  homeTitle.innerText=t.homeTitle;
  homeText.innerText=t.homeText;
  marketTitle.innerText=t.marketTitle;
  weatherTitle.innerText=t.weatherTitle;
  weatherText.innerText=t.weatherText;
  tipsTitle.innerText=t.tipsTitle;

  tipsList.innerHTML="";
  t.tips.forEach(i=>tipsList.innerHTML+=`<li>${i}</li>`);

  aboutTitle.innerText=t.aboutTitle;
  aboutText.innerText=t.aboutText;
}
loadLang();

if("geolocation" in navigator){
 navigator.geolocation.getCurrentPosition(pos=>{
   location.innerText="ЁЯУН Lat "+pos.coords.latitude.toFixed(2)+", Lon "+pos.coords.longitude.toFixed(2);
 });
}else{
 location.innerText="Location not supported";
}

function speakSection(id){
  let text=document.getElementById(id).innerText;
  let u=new SpeechSynthesisUtterance(text);
  u.lang=currentLang;
  speechSynthesis.speak(u);
}
// ------------ DAILY MARKET PRICE LOGIC ------------
function getDailyVariation(seed){
  const date=new Date().getDate();
  return ((Math.sin(seed*date)+1)*0.05 - 0.025);   // ┬▒2.5%
}

function generateMarketPrices(){
  const crops={
    Wheat:21,
    Rice:25,
    Maize:18,
    Cotton:68,
    Sugarcane:3.5,
    Pulses:27,
    Soybean:45
  };

  const todayPrices={};
  let i=1;

  for(let crop in crops){
    const base=crops[crop];
    const diff=base*getDailyVariation(i++);
    todayPrices[crop]=(base+diff).toFixed(2);
  }
  return todayPrices;
}

function loadMarket(){
  const prices=generateMarketPrices();
  const ml=document.getElementById("marketList");

  ml.innerHTML="";
  for(let [crop,price] of Object.entries(prices)){
    ml.innerHTML+=`<div style="margin:4px 0;">${crop}: тВ╣${price}/kg</div>`;
  }

  // Refresh button
  const refreshBtn=document.createElement("button");
  refreshBtn.innerText="ЁЯФД Refresh Prices";
  refreshBtn.onclick=()=>loadMarket();
  refreshBtn.style.cssText="background:#2f6d2f;color:white;border:none;padding:8px 12px;margin-top:10px;border-radius:8px;";

  ml.appendChild(refreshBtn);
}
loadMarket();


// ------------ WEATHER SIMULATION ------------
function fakeWeather(lat,lon){
  const temp=(26 + Math.sin(lat+lon)*4).toFixed(1);
  const rain=((Math.cos(lat-lon)+1)*50).toFixed(0);

  document.getElementById("weatherText").innerText =
    `Temperature: ${temp}┬░C | Expected Rainfall: ${rain} mm`;
}

if("geolocation" in navigator){
  navigator.geolocation.getCurrentPosition(pos=>{
    fakeWeather(pos.coords.latitude,pos.coords.longitude);
  });
}


// ------------ FOOTER ------------
const footer=document.createElement("footer");
footer.innerHTML=`
  <div style="text-align:center;padding:10px;color:#2f6d2f;">
    <hr style="border-top:1px solid #ccc;">
    <p>┬й 2025 KisanMitra | Team KisanXCoders | DPS Navi Mumbai | Buildathon 2025</p>
  </div>
`;
document.body.appendChild(footer);

</script>

</body>
</html>

